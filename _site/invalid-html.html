<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>The problem with invalid html : Abhishek Yadav's t-log</title>
   <meta name="author" content="Abhishek Yadav" />
   
   <!-- Indigenous CSS -->
   <link rel="stylesheet" href="/css/blog.css" type="text/css" />

</head>
<body>

<div class="site">
  
  <div id="header">
	<div class="name">
	  <a href="/">Abhishek Yadav's <span class="italic">t-log</span></a>
	</div>
  </div>

  <div id="content">
  <div id="post">
	<h1><a href="invalid-html.html">The problem with invalid html</a></h1>
	<div id="post-header">
		<div class="date">21 September 2010</div>
		<div class="location">chennai</div>
	</div>	
<p>I never really cared about validity of HTML I write until I faced this problem.</p>

<p>Not that I was not aware of markup validity, but in practice, I had never faced a problem due to invalid html. Browsers generally display it just fine. Also, most of my markup is generated by the framework I use (ruby on rails), so I cared even less.</p>

<p>The problem is that I am trying to insert some html in an element using the Jquery .html() method, and it just fails. As usual, because it is javascript, it doesn&#8217;t show up any errors - just that the thing doesn&#8217;t work. I am using Firebug, so I notice there <em>is</em> some vague error. Did google search, and still no clue on what went wrong. Read all the .html() documentation on the jquery site, and a very small hint - someone in the comments section says something like <em>you can&#8217;t claim it went wrong if your html is invalid</em>.</p>

<p>So I start experimenting. Instead of asking it to render all the big markup, I push a small piece of markup that I think should be safely valid, and it works. Next I go to <a href='http://validator.w3.org/'>the w3c html validator</a>, and check the markup I was trying to insert. And it very nicely points out all the mistakes. Next I remove/change the problem elements, and .html() works.</p>

<p>My <strong>learnings</strong> from this experience (in no particular order):</p>

<ul>
<li>Having custom attributes makes the markup invalid. <div myAttribute='value' /> is invalid. It might work thought. And can be used in a <a href='http://stackoverflow.com/questions/992115/custom-attributes-yay-or-nay/992307#992307'>particular way</a> in HTML5</li>

<li>Custom tags have another problem. If in future, a tag of the same name is introduced, your site may not work.</li>

<li>html should be written like XML. And it should follow its DOCTYPE. And mentioning DOCTYPE is necessary.</li>

<li>Many html elements are not allowed with-in others. eg - heading tags within paragraph tags is invalid.</li>

<li>Checking markup validity is easy.</li>

<li>Character encoding should also be mentioned.</li>

<li>Using valid html markup is not tough.</li>

<li>Browser errors / firebug errors should not be ignored even if the thing is working.</li>
</ul>

<p>And,</p>

<ul>
<li>It is worth learning more about Xhtml/DOCTYPE/encoding, and the logic behind the standards.</li>
</ul>
</div>
  </div>	

  <div id="sidebar-right">
	<div id="about">
	  <h2>About</h2>
	  <div id="about-desc"> This blog is a log of my technology related (hence <span class="italic">t-log</span>) experiences, thoughts and ideas. 
		I'm a ruby programmer by profession and a science lover at heart. A bit more about me is <a href="/about.html">here</a>. </div>
	</div>
  </div>

  <div id="footer">
  </div>

</div>

</body>
</html>
